schema: spec-driven-review

# Project context
context: |
  # Tech Stack
  - Runtime: Deno 2.0+ with TypeScript (native support, no build step)
  - Web Framework: Hono (lightweight, portable across runtimes)
  - Browser Automation: Playwright (headless Chromium, screenshots, traces)
  - Frontend: Vue.js + Tailwind CSS + Headless UI (Material Design-inspired styling)
  - Build/Dev: Vite
  - Testing: Vitest + Playwright for E2E
  - Database: PostgreSQL (Supabase with Supavisor connection pooler)
  - Authentication: Google OAuth 2.0 for Gmail API; dashboard auth via centralized login portal at login.mklv.tech

  # Conventions
  - We use conventional commits
  - Single-user system (personal use only, not multi-tenant/SaaS)
  - Pattern-based unsubscribe automation with iterative improvement
  - Failed flows surface with screenshots for debugging

  # Domain: Email Unsubscribe Automation
  - Connects to Gmail via OAuth to scan inbox
  - Extracts unsubscribe links from headers (List-Unsubscribe) and body
  - Automates unsubscribe flows via browser (one-click, mailto, multi-step forms)
  - Maintains allow list of senders to preserve
  - Tracks compliance and surfaces failures for pattern improvement
  - Web dashboard at email-unsubscribe.mklv.tech

  # Deployment
  - Google Cloud Run (serverless, scale-to-zero)
  - CI/CD via GitHub Actions calling Dagger workflows
  - Secure credential management via environment variables

  # Database Migrations
  - Migrations are additive-only: never drop tables or columns
  - No down migrations - data preservation is paramount
  - Schema changes should be backward-compatible

# Per-artifact rules
rules:
  spec:
    - Focus on single-user personal use case
    - Consider browser automation edge cases and failure modes
    - Include screenshot/trace capture for debugging failed flows
  tasks:
    - Break tasks into chunks of max 2 hours
    - Include test coverage for each feature
    - Consider both happy path and error handling
