# Playwright browser server - exposes browsers via WebSocket
FROM mcr.microsoft.com/playwright:v1.58.1-noble

# Create data directories owned by the built-in pwuser
RUN mkdir -p /app/data/screenshots /app/data/traces && \
  chown -R pwuser:pwuser /app

WORKDIR /app

# Use the image's built-in non-root user
USER pwuser

EXPOSE 3000

# Run Playwright server - clients connect via WebSocket
CMD ["npx", "playwright", "run-server", "--port=3000", "--host=0.0.0.0"]
